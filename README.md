# ğŸ“Š Consulta CrÃ©dito - Fullstack (API + Frontend)

Este projeto Ã© composto por duas partes:

- ğŸ§  **Backend (API)**: AplicaÃ§Ã£o Java 17 com Spring Boot que se conecta a um banco de dados PostgreSQL.
- ğŸŒ **Frontend**: AplicaÃ§Ã£o Angular 19 empacotada com Nginx para exibiÃ§Ã£o da interface.

Toda a configuraÃ§Ã£o estÃ¡ contida em containers Docker, facilitando a execuÃ§Ã£o do sistema completo sem instalaÃ§Ã£o manual de dependÃªncias.

---

## âœ… PrÃ©-requisitos

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

---

## ğŸš€ Como rodar o projeto

### 1. Clone este repositÃ³rio

```bash
git clone https://github.com/jvhk/api-consulta-credito.git
cd api-consulta-credito
```

### 2. Suba todos os containers (frontend, backend e banco)

```bash
docker-compose up --build
```

---

## ğŸ§± O que acontece ao iniciar?

- O banco PostgreSQL Ã© iniciado no container `postgres_credito`.
- O banco `credito_db` Ã© criado automaticamente com tabela `credito` e dados iniciais via scripts SQL.
- A API Spring Boot Ã© empacotada com Gradle e iniciada no container `backend_api_credito`.
- A aplicaÃ§Ã£o Angular Ã© construÃ­da e servida via Nginx no container `frontend_credito`.

### ğŸ”„ Tabela `credito` criada automaticamente:

```sql
CREATE TABLE credito
(
	id               BIGINT GENERATED BY DEFAULT AS IDENTITY,
	numero_credito   VARCHAR(50)   NOT NULL,
	numero_nfse      VARCHAR(50)   NOT NULL,
	data_constituicao DATE         NOT NULL,
	valor_issqn      DECIMAL(15,2) NOT NULL,
	tipo_credito     VARCHAR(50)   NOT NULL,
	simples_nacional BOOLEAN       NOT NULL,
	aliquota         DECIMAL(5,2)  NOT NULL,
	valor_faturado   DECIMAL(15,2) NOT NULL,
	valor_deducao    DECIMAL(15,2) NOT NULL,
	base_calculo     DECIMAL(15,2) NOT NULL
);
```

### ğŸ“¦ Dados de exemplo inseridos:

```sql
INSERT INTO credito (...) VALUES
('123456', '7891011', '2024-02-25', 1500.75, 'ISSQN', true, 5.0, 30000.00, 5000.00, 25000.00),
('789012', '7891011', '2024-02-26', 1200.50, 'ISSQN', false, 4.5, 25000.00, 4000.00, 21000.00),
('654321', '1122334', '2024-01-15', 800.50, 'Outros', true, 3.5, 20000.00, 3000.00, 17000.00);
```

---

## ğŸŒ Acessos

- ğŸ”¸ **Frontend (interface)**: [http://localhost:4200](http://localhost:4200)
- ğŸ”¸ **Backend (API REST)**: [http://localhost:8080/api](http://localhost:8080/api)

---

## ğŸ” Endpoints da API

A API estarÃ¡ acessÃ­vel na rota base `/api`. Endpoints disponÃ­veis:

| MÃ©todo | URL                                       | DescriÃ§Ã£o                                                 |
|--------|-------------------------------------------|-----------------------------------------------------------|
| GET    | `/creditos/{numeroNfse}`                 | Lista crÃ©ditos filtrados pelo nÃºmero da NFSe              |
| GET    | `/creditos/credito/{numeroCredito}`      | Retorna um crÃ©dito especÃ­fico pelo nÃºmero do crÃ©dito      |

Exemplos:

- `GET http://localhost:8080/api/creditos/7891011`
- `GET http://localhost:8080/api/creditos/credito/123456`

---

## ğŸ§ª Acesso ao banco de dados

VocÃª pode acessar o PostgreSQL com ferramentas como DBeaver, pgAdmin ou via terminal `psql`:

- **Host**: `localhost`
- **Porta**: `5432`
- **Banco**: `credito_db`
- **UsuÃ¡rio**: `postgres`
- **Senha**: `root`

---

## ğŸ§¹ Parar os containers

```bash
docker-compose down
```

---

## ğŸ—‚ï¸ Estrutura de pastas relevante

```
.
â”œâ”€â”€ docker-compose.yaml              # Compose unificado
â”‚
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ creditos/
â”‚       â”œâ”€â”€ Dockerfile               # Docker do backend
â”‚       â”œâ”€â”€ db/
â”‚       â”‚   â””â”€â”€ init/
â”‚       â”‚       â”œâ”€â”€ create-db.sql
â”‚       â”‚       â””â”€â”€ insert-values.sql
â”‚       â””â”€â”€ src/                     # CÃ³digo Java/Spring Boot
â”‚
â””â”€â”€ frontend/
    â””â”€â”€ consulta-credito/
        â”œâ”€â”€ Dockerfile              # Docker do frontend (Angular + Nginx)
        â””â”€â”€ src/                    # CÃ³digo Angular
```

---

## ğŸ‘¤ Autor

JoÃ£o Vitor  
[LinkedIn](https://www.linkedin.com/in/jvhk/)  
[GitHub](https://github.com/jvhk)

---