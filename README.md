
# ğŸ“Š API Consulta CrÃ©dito

Este projeto Ã© uma API Java (Spring Boot) que se conecta a um banco de dados PostgreSQL. Toda a configuraÃ§Ã£o necessÃ¡ria estÃ¡ contida em containers Docker, facilitando o uso sem necessidade de instalaÃ§Ãµes manuais.

---

## âœ… PrÃ©-requisitos

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

---

## ğŸš€ Como rodar o projeto

### 1. Clone este repositÃ³rio

```bash
git https://github.com/jvhk/api-consulta-credito.git
cd api-consulta-credito/backend/creditos
```

### 2. Suba os containers com Docker Compose

```bash
docker-compose up --build
```

---

## ğŸ§± O que acontece ao iniciar?

- O banco PostgreSQL Ã© iniciado no container `postgres_credito`.
- O banco `credito_db` Ã© criado automaticamente.
- A tabela `credito` Ã© criada com o seguinte comando:

```sql
CREATE TABLE credito
(
	id               BIGINT GENERATED BY DEFAULT AS IDENTITY,
	numero_credito   VARCHAR(50)   NOT NULL,
	numero_nfse      VARCHAR(50)   NOT NULL,
	data_constituicao DATE         NOT NULL,
	valor_issqn      DECIMAL(15,2) NOT NULL,
	tipo_credito     VARCHAR(50)   NOT NULL,
	simples_nacional BOOLEAN       NOT NULL,
	aliquota         DECIMAL(5,2)  NOT NULL,
	valor_faturado   DECIMAL(15,2) NOT NULL,
	valor_deducao    DECIMAL(15,2) NOT NULL,
	base_calculo     DECIMAL(15,2) NOT NULL
);
```

- Dados de exemplo sÃ£o inseridos automaticamente:

```sql
INSERT INTO credito (numero_credito, numero_nfse, data_constituicao, valor_issqn, tipo_credito, simples_nacional, aliquota, valor_faturado, valor_deducao, base_calculo)
VALUES
('123456', '7891011', '2024-02-25', 1500.75, 'ISSQN', true, 5.0, 30000.00, 5000.00, 25000.00),
('789012', '7891011', '2024-02-26', 1200.50, 'ISSQN', false, 4.5, 25000.00, 4000.00, 21000.00),
('654321', '1122334', '2024-01-15', 800.50, 'Outros', true, 3.5, 20000.00, 3000.00, 17000.00);
```

- A aplicaÃ§Ã£o Spring Boot Ã© empacotada e iniciada em `http://localhost:8080/api`.

---

## ğŸ” Endpoints da API

A API ficarÃ¡ acessÃ­vel via:

```
http://localhost:8080/api
```

### Endpoints disponÃ­veis na rota `/creditos`:

| MÃ©todo | URL                          | DescriÃ§Ã£o                                     |
|--------|------------------------------|-----------------------------------------------|
| GET    | `/creditos/{numeroNfse}`     | Retorna lista de crÃ©ditos filtrados pelo nÃºmero NFSe |
| GET    | `/creditos/credito/{numeroCredito}` | Retorna crÃ©dito especÃ­fico pelo nÃºmero do crÃ©dito  |

Exemplo de uso:

- `GET http://localhost:8080/api/creditos/7891011` â€” lista crÃ©ditos pelo nÃºmero NFSe `7891011`
- `GET http://localhost:8080/api/creditos/credito/123456` â€” consulta crÃ©dito pelo nÃºmero do crÃ©dito `123456`


---

## ğŸ§ª Acesso ao banco de dados

VocÃª pode acessar o banco utilizando alguma ferramenta como **DBeaver**, **pgAdmin** ou terminal via `psql`:

- **Host**: `localhost`
- **Porta**: `5432`
- **Banco**: `credito_db`
- **UsuÃ¡rio**: `postgres`
- **Senha**: `root`

---

## ğŸ§¹ Para parar os containers

```bash
docker-compose down
```

---

## ğŸ—‚ï¸ Estrutura do projeto relevante

```
.
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ db
â”‚   â””â”€â”€ init
â”‚       â”œâ”€â”€ create-db.sql         # CriaÃ§Ã£o da tabela
â”‚       â””â”€â”€ insert-values.sql     # Inserts iniciais
â”œâ”€â”€ src/                          # CÃ³digo da aplicaÃ§Ã£o
â”œâ”€â”€ build.gradle
â””â”€â”€ README.md
```

---

## ğŸ‘¤ Autor

Seu Nome  
[LinkedIn](https://www.linkedin.com/in/jvhk/)  
[GitHub](https://github.com/jvhk)

---
